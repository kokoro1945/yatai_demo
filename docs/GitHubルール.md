# GitHubルール

## はじめに
このドキュメントは、近畿大学大学祭実行委員会システム部の GitHub 運用ルールをまとめたものです。
全員が同じ運用で開発を進めるため、必ず確認してください。

---

## 用語解説

**GitHub（ギットハブ）**
- 説明： コードを保存・共有・管理するための Web サービス
- 例え： コードの Google ドライブのようなもの
- 用途： チームでコードを共同開発するときに使う

**Git（ギット）**
- 説明： コードの変更履歴を記録・管理するツール
- 例え： ゲームのセーブデータのようなもの（いつでも過去に戻れる）
- 用途： 「誰が」「いつ」「何を」変更したかを記録

**リポジトリ（Repository / repo）**
- 説明： プロジェクトのコードやファイルを保存する場所
- 例え： プロジェクト専用のフォルダ
- 用途： プロジェクト全体のコードを 1 つの場所で管理

**ブランチ（Branch）**
- 説明： コードの開発を並行して進めるための「枝分かれ」
- 例え： 本の下書きを複数作るようなもの（最後に 1 つにまとめる）
- 用途： 複数人が同時に異なる機能を開発できる

**コミット（Commit）**
- 説明： コードの変更を記録（保存）すること
- 例え： ゲームのセーブポイントを作ること
- 用途： 作業の区切りで変更を保存し、後で戻れるようにする

**プッシュ（Push）**
- 説明： ローカル（自分の PC）の変更を GitHub にアップロードすること
- 例え： 自分の PC からクラウドにファイルをアップロード
- 用途： 自分の作業をチームメンバーと共有する

**プル（Pull）**
- 説明： GitHub から最新のコードを自分の PC にダウンロードすること
- 例え： クラウドから最新ファイルをダウンロード
- 用途： 他の人の変更を自分の PC に取り込む

**Issue（イシュー）**
- 説明： やるべきタスクやバグを記録する「課題管理チケット」
- 例え： TODO リストの 1 項目
- 用途： 「何を作るか」「何を修正するか」を明確にする

**プルリクエスト（Pull Request / PR）**
- 説明： 自分の変更を本番コードに取り込んでもらうための「申請」
- 例え： 「このコード、本番に入れていいですか？」という確認依頼
- 用途： レビューを受けてから本番コードに反映する

**マージ（Merge）**
- 説明： 別々のブランチを 1 つに統合すること
- 例え： 複数の下書きを 1 つの完成版にまとめる
- 用途： 開発したコードを本番コードに反映する

**コンフリクト（Conflict）**
- 説明： 同じファイルの同じ箇所を複数人が変更したときに起こる衝突
- 例え： 2 人が同じ文章を別々に編集して、どちらを採用するか決められない状態
- 用途： 手動で「どちらの変更を残すか」を決める必要がある

**レビュー（Review / Code Review）**
- 説明： 他の人のコードを確認して、問題がないかチェックすること
- 例え： 作文を友達に読んでもらって、誤字や改善点を指摘してもらう
- 用途： コードの品質を保ち、バグを減らす

**クローン（Clone）**
- 説明： GitHub のリポジトリを自分の PC にコピーすること
- 例え： クラウドのフォルダを自分の PC にダウンロード
- 用途： 初めてプロジェクトに参加するときに行う

**フォーク（Fork）**
- 説明： 他人のリポジトリを自分のアカウントにコピーすること
- 例え： 他人のプロジェクトを自分の場所に複製
- 用途： オープンソースプロジェクトに貢献するときなど（このプロジェクトでは基本的に使わない）

**ローカル（Local）**
- 説明： 自分の PC 上のこと
- 対義語： リモート（Remote / GitHub サーバー上）

**リモート（Remote）**
- 説明： GitHub サーバー上のこと
- 対義語： ローカル（自分の PC）

**main ブランチ**
- 説明： 本番環境で動いているコードが入るブランチ
- 別名： master（古い名称）
- 用途： 実際にユーザーが使うコードを管理

**develop ブランチ**
- 説明： 開発中のコードが入るブランチ
- 用途： 開発者が動作確認するためのコードを管理

---

## リポジトリ命名規則

### 形式
- プロジェクト名-年度

### ルール
- 小文字のみ
- 単語が続く場合はハイフン（-）で区切る
- 年度を末尾に付ける
- 分かりやすい名前（略語は避ける）

### 例
- festival-app-2024
- festival-admin-panel-2025
- event-management-api-2024
- qr-code-scanner-2025

---

## ブランチ戦略

### ブランチ構成
```
main（本番環境）
└── develop（開発環境）
    ├── feature/○○（機能追加・Issueベース）
    ├── fix/○○（バグ修正・Issueベース）
    └── docs/○○（ドキュメント更新）
```

### 各ブランチの役割

**main ブランチ**
- 本番環境にデプロイされるコード
- 直接 push は禁止
- developからのマージのみ許可

**develop ブランチ**
- 開発環境のコード
- 直接 push は禁止
- 各機能ブランチからのマージを受け付ける
- 動作確認後にmainへマージ

**feature/○○ ブランチ**
- 機能開発時に使用
- 必ず Issue を作成してから切る
- developから切る
- 例：feature/ログイン機能、feature/イベント一覧表示

**fix/○○ ブランチ**
- バグ修正時に使用
- 必ず Issue を作成してから切る
- developから切る
- 例：fix/ログインボタンが押せない、fix/画像が表示されない

**docs/○○ ブランチ**
- ドキュメント更新時に使用
- developから切る
- 例：docs/プロジェクト仕様書更新、docs/README更新

---

## ブランチ命名規則

### 基本ルール
- 形式： 種類/内容
- 言語： 日本語 OK
- 内容： 具体的に書く（誰が見ても分かるように）

### 良い例
- feature/イベント管理画面
- feature/QRコード読み取り機能
- fix/画像が表示されないバグ
- docs/API仕様書追加

### 悪い例
- feature/new-feature（何の機能か不明）
- fix/bug（何のバグか不明）
- feature/test（テストではない）

---

## Issue 管理

### Issue とは？
やるべきタスクやバグを記録するための「課題管理チケット」
GitHub 上で管理される
チーム全員が「今何をやっているか」を把握できる

### Issue ルール
- 作業を始める前に必ず Issue を作成
- 初期開発でも追加開発でも必須
- 全員が Issue を作成できる
- 大きな単位で Issue を作る（例：「ログイン機能を実装」）

### Issue テンプレート
```
## やりたいこと

（何を実装・修正したいか）

## 詳細

（具体的な内容や背景）
```

### Issue ラベル
| ラベル | 用途 |
| ---- | ---- |
| bug | バグ修正 |
| enhancement | 機能追加 |
| documentation | ドキュメント |
| good first issue | 初学者向け |
| help wanted | 助けが欲しい |
| wontfix | 対応しない |

### Issue 作成からクローズまでの流れ

1. Issue を作成
   - テンプレートに沿って記入
   - 適切なラベルを付ける
   - 担当者をアサイン（自分または他のメンバー）
2. ブランチを切る（GitHub 上で）
   - Issue 画面の右側にある「Development」欄を確認
   - 「Create a branch」ボタンをクリック
   - ブランチ名は自動でIssue番号-タイトル形式で提案される
   - Branch source（どこから切るか）をdevelopに設定
   - 「Create branch」をクリック
   - このやり方で Issue とブランチが自動的に関連付けられる
3. ローカルでブランチをチェックアウト
   - git fetch origin
   - git checkout 作成されたブランチ名
4. 作業・コミット
   - コミットメッセージに Issue 番号を含める（任意）
   - 例：[add] ログイン画面を追加 #12
5. PR を出す
   - 関連 Issue を PR に記載
   - Discord に通知（後述）
6. マージ後に Issue をクローズ
   - PR がマージされると自動でクローズ
   - 自動でクローズされない場合は手動でクローズ

---

## コミットメッセージ

### コミットとは？
コードの変更を記録（保存）すること
「誰が」「いつ」「何を」変更したかが分かる
後で過去のコードに戻ることができる

### 形式
- [種類] 変更内容

### 種類一覧
| 種類 | 用途 | 例 |
| --- | --- | --- |
| add | 新規追加 | [add] ログイン画面を追加 |
| fix | 修正 | [fix] ログインボタンのバグを修正 |
| update | 更新 | [update] APIエンドポイントを変更 |
| remove | 削除 | [remove] 不要なファイルを削除 |
| docs | ドキュメント | [docs] READMEを更新 |

### 良い例
- [add] イベント一覧画面を追加
- [fix] 画像が表示されないバグを修正
- [update] Supabaseの認証処理を改善
- [docs] プロジェクト仕様書にAPI設計を追加

### 悪い例
- update（何を更新したか不明）
- バグ修正（種類が書かれていない）
- [add] いろいろ追加（具体性がない）

### 補足
- Issue 番号を含めることもできる（任意）
- 例：[add] ログイン画面を追加 #12

---

## プルリクエスト（PR）

### プルリクエストとは？
自分の変更を本番コードに取り込んでもらうための「申請」
他のメンバーにレビューしてもらう
承認されたらマージ（統合）される

### PR テンプレート
```
## 変更内容

（何を変更したか）

## 関連 Issue

#123
```

### PR 作成ルール
- タイトルは分かりやすく
  - 例：「ログイン機能を実装」「画像表示バグを修正」
- 変更内容を簡潔に書く
  - 何をしたのか
  - なぜその変更が必要だったのか（任意）
- 関連 Issue を必ず記載
  - #123のように番号で記載
  - 複数ある場合は#123, #456
- スクリーンショットを添付（推奨）
  - UI 変更がある場合は画面キャプチャを貼る
- PR を作成したら Discord に通知
  - 専用チャンネル（例：#code-review）に投稿
  - 通知目的（レビューは GitHub 上で実施）
  - 投稿内容：
    - PRを作成しました
    - 【タイトル】ログイン機能を実装
    - 【URL】https://github.com/.../pull/123

### マージ条件
- 最低 1 人の承認が必要
- コンフリクトが解消されていること
- レビュアーがマージする（自分でマージしない）

---

## コードレビュー

### コードレビューとは？
他の人のコードを確認して、問題がないかチェックすること
コードの品質を保ち、バグを減らすために行う
お互いに学び合う機会でもある

### レビュールール
- コードレビューは必須
- GitHub 上で実施
- 主に以下を確認：
  - 動作確認（実際に動くか）
  - コードの可読性
  - コメントが適切か
  - 命名規則に沿っているか

### レビュー開始時の連絡
レビューを開始したら Discord に通知：
- レビュー開始します
- 【PR】ログイン機能を実装
- 【URL】https://github.com/.../pull/123

### レビューコメントの書き方（GitHub 上）
- 建設的に（「〜した方が良い」など）
- 理由を添える
- GitHub 上のコメント機能を使用
- 例：
  - この関数は少し長いので、分割した方が読みやすくなると思います。
    例えば、バリデーション部分を別関数にするなど。

### レビュー完了時の連絡
承認したら Discord に通知：
- レビュー完了しました
- 【PR】ログイン機能を実装
- 【URL】https://github.com/.../pull/123
- LGTMです

### LGTM（エルジーティーエム）とは？
"Looks Good To Me"の略
「問題なさそうです」という意味
レビューで承認するときに使う

---

## プッシュのタイミング

### プッシュとは？
自分の PC（ローカル）の変更を GitHub（リモート）にアップロードすること
チームメンバーと変更を共有する

### 推奨タイミング
- 作業終了時（その日の作業が終わったら）
- 一つの機能が完成したとき
- 大きな変更をしたとき（バックアップ目的）

### ルール
- 自分のブランチには自由に push OK
- develop、mainへの直接 push は禁止
- push する前に：
  - エラーが出ないか確認
  - npm startで動作確認

---

## ドキュメント更新ルール

### プロジェクト仕様書の更新

**更新が必要なタイミング**
- 機能仕様が変更されたとき
- 新しい API・テーブルが追加されたとき
- データベース設計が変更されたとき
- 画面設計が変更されたとき

**更新手順**
1. Issue を作成
```
## やりたいこと

プロジェクト仕様書の API 設計を更新

## 詳細

新しいエンドポイント`GET /api/notifications`を追加したため、
仕様書に反映する
```
2. GitHub 上でブランチを切る
   - Issue 画面の「Development」欄から「Create a branch」
   - ブランチ名：docs/API設計更新
   - Branch source：develop
3. ローカルでチェックアウト
   - git fetch origin
   - git checkout 作成されたブランチ名
4. プロジェクト仕様書を編集
   - docs/プロジェクト仕様書.mdを編集
   - 変更箇所を明確に
5. コミット・プッシュ
   - git add docs/プロジェクト仕様書.md
   - git commit -m "[docs] API設計に通知取得エンドポイントを追加"
   - git push origin 作成されたブランチ名
6. PR を出す
```
## 変更内容

API 設計に通知取得エンドポイント（GET /api/notifications）を追加

## 関連 Issue

#67
```
7. Discord に通知
8. レビュー・マージ

### その他のドキュメント更新
- README.md
- 開発ルール.md
- AI 用プロンプト

も同様にdocs/ブランチで更新

---

## 環境変数ルール

### .env（実際の値）
- 絶対にコミットしない
- .gitignoreに必ず含める
- 各開発者がローカルで作成
- チームメンバー間で共有する場合は Slack や Discord の DM で

### .env.example（サンプル）
- このファイルは GitHub にコミットする
- 値は空かダミー値にする
- 新しい環境変数追加時は必ず更新

---

## 禁止事項

### 絶対にやってはいけないこと
- mainへ直接 push
- developへ直接 push
- Issue を作らずに作業開始
- レビューなしでマージ
- 他人のブランチに勝手に push
- コンフリクトを放置してマージ
- 動作確認せずに PR
- .envをコミット

### 推奨しないこと
- 一つのブランチで複数の機能を実装
- コミットメッセージを適当に書く
- 巨大な PR（500 行以上の変更）
